<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <title>POSPLUS</title>
    <style>
        /* ==================== RESET & BASE STYLES ==================== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, sans-serif;
            background: #FFFFFF;
            min-height: 100vh;
            color: #333333;
        }
        /* ==================== LOGIN OVERLAY ==================== */
        #login-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #f5f5f5;
            z-index: 10000;
            display: none;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            font-family: sans-serif;
            transition: opacity 0.5s;
        }
        #login-overlay {
            transition: opacity 0.3s ease;
            opacity: 0; /* default */
            pointer-events: none;
        }
        #login-overlay[style*="display: flex"] {
            opacity: 1;
            pointer-events: all;
        }
        .login-container {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            width: 300px;
            text-align: center;
        }
        .login-container h2 {
            color: #006B54;
            margin-bottom: 20px;
        }
        .login-container input {
            width: 100%;
            padding: 12px;
            margin-bottom: 15px;
            border: 1px solid #ddd;
            border-radius: 10px;
            font-size: 16px;
        }
        .login-container button {
            width: 100%;
            padding: 12px;
            background: #006B54;
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
        }
        #import-login-btn {
            margin-top: 10px;
            background: transparent !important;
            border: 1px solid #006B54 !important;
            color: #006B54 !important;
        }
        .login-container .error-message {
            color: red;
            margin-top: 15px;
            display: none;
        }
        .login-container .hint {
            margin-top: 20px;
            font-size: 0.8rem;
            color: #999;
        }
        /* ==================== DRAWER SIDEBAR ==================== */
        .drawer-toggle {
            background: none;
            border: none;
            cursor: pointer;
            padding: 8px;
            margin-right: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #006B54;
        }
        .drawer-toggle svg {
            width: 24px;
            height: 24px;
        }
        .sidebar {
            position: fixed;
            left: -220px;
            top: 0;
            width: 220px;
            height: 100vh;
            background: #ffffff;
            box-shadow: 2px 0 8px rgba(0,0,0,0.1);
            z-index: 300;
            padding: 20px 0;
            display: flex;
            flex-direction: column;
            gap: 5px;
            overflow-y: auto;
            transition: left 0.3s ease;
        }
        .sidebar.open {
            left: 0;
        }
        .menu-group {
            margin-bottom: 5px;
        }
        .menu-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 16px;
            background-color: #f5f5f5;
            cursor: pointer;
            border-radius: 8px;
            margin: 0 10px 5px;
            font-weight: 700;
            color: #006B54;
            transition: background 0.2s;
        }
        .menu-header:hover {
            background-color: #e0e0e0;
        }
        .menu-header .arrow {
            transition: transform 0.2s;
        }
        .menu-header.open .arrow {
            transform: rotate(90deg);
        }
        .sub-menu {
            display: none;
            margin-bottom: 10px;
        }
        .sub-menu button {
            margin: 5px 10px;
            padding: 12px 16px;
            border: 1px solid #006B54;
            border-radius: 15px;
            background: white;
            color: #006B54;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            transition: all 0.2s;
            width: calc(100% - 20px);
        }
        .sub-menu button:hover {
            background: #f0f9f6;
        }
        .sub-menu button svg {
            width: 18px;
            height: 18px;
        }
        .home-button {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 12px 16px;
            background: #f5f5f5;
            border: none;
            border-radius: 8px;
            margin: 0 10px 10px;
            color: #006B54;
            font-weight: 600;
            cursor: pointer;
            width: calc(100% - 20px);
        }
        .home-button:hover {
            background: #e0e0e0;
        }
        .drawer-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 250;
            display: none;
        }
        .drawer-overlay.show {
            display: block;
        }
        @media (max-width: 768px) {
            .sidebar {
                width: 60px;
            }
            .sidebar button span {
                display: none;
            }
            .sidebar.open {
                width: 220px;
            }
            .sidebar.open button span {
                display: inline;
            }
        }
        /* ==================== HEADER ==================== */
        .app-header {
            background: #FFFFFF;
            color: #006B54;
            padding: 16px 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .app-title {
            font-size: 1.1rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            color: #006B54;
        }
        .header-actions {
            display: flex;
            gap: 8px;
            align-items: center;
        }
        .header-actions button {
            background: #FFFFFF;
            color: #006B54;
            padding: 8px 12px;
            border-radius: 15px;
            border: 1px solid #006B54;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .header-actions button:hover {
            background: #006B54;
            color: white;
        }
        #user-name-display {
            margin-right: 10px;
            font-weight: 600;
            color: #006B54;
        }
        /* ==================== MAIN CONTENT ==================== */
        .main-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
            text-align: center;
            color: #666;
        }
        .main-content .placeholder-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 20px;
            color: #006B54;
            opacity: 0.5;
        }
        .main-content h2 {
            font-weight: 400;
            margin-bottom: 10px;
            color: #333;
        }
        .main-content p {
            color: #999;
        }
        /* ==================== DASHBOARD STATISTICS ==================== */
        .stats-grid {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .stat-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            text-align: center;
            min-width: 200px;
            flex: 1 1 auto;
            max-width: 250px;
        }
        
        .stat-card .stat-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .stat-card .stat-label {
            font-size: 0.9rem;
            color: #666;
            display: block;
            margin-bottom: 5px;
        }
        
        .stat-card .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: #006B54;
            display: block;
        }

        /* ==================== NOTIFICATIONS ==================== */
        #notifications-area {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 20px;
        }
        
        .notification {
            padding: 15px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .notification.warning {
            background-color: #fff3cd;
            border: 1px solid #ffeeba;
            color: #856404;
        }
        
        .notification.danger {
            background-color: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }
        
        .notification.info {
            background-color: #d1ecf1;
            border: 1px solid #bee5eb;
            color: #0c5460;
        }
        
        .notification button {
            background: transparent;
            border: 1px solid currentColor;
            border-radius: 15px;
            padding: 5px 10px;
            font-size: 0.9rem;
            cursor: pointer;
            min-height: auto;
            transition: all 0.2s;
        }
        
        .notification button:hover {
            background: rgba(0,0,0,0.1);
        }
        
        /* ==================== CHART ==================== */
        #salesChart {
            width: 100% !important;
            height: auto !important;
            max-height: 300px;
            margin-top: 10px;
        }

        /* ==================== PENDING TRANSACTIONS TABLE ==================== */
        #pending-list-container {
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid #eee;
            border-radius: 15px;
        }
        
        #pending-list-container table {
            width: 100%;
            border-collapse: collapse;
        }
        
        #pending-list-container th {
            background: #f5f5f5;
            padding: 12px;
            text-align: left;
            color: #333;
            font-weight: 600;
            position: sticky;
            top: 0;
            z-index: 1;
        }
        
        #pending-list-container td {
            padding: 12px;
            border-bottom: 1px solid #eee;
        }
        
        #pending-list-container tr:hover {
            background: #f9f9f9;
        }

        /* ==================== RESPONSIVE ADJUSTMENTS ==================== */
        @media (max-width: 768px) {
            .stats-grid {
                gap: 10px;
            }
            .stat-card {
                min-width: 150px;
                padding: 15px;
            }
            .stat-card .stat-value {
                font-size: 1.5rem;
            }
            .notification {
                flex-direction: column;
                align-items: flex-start;
            }
            .notification button {
                align-self: flex-end;
            }
        }
        /* ==================== HALAMAN TRANSAKSI (PRODUK) ==================== */
        #transaksi-page {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            display: none;
        }
        .transaksi-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }
        .transaksi-header-left {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .transaksi-header-left h2 {
            color: #006B54;
            font-size: 1.5rem;
            margin: 0;
        }
        .back-button {
            background: none;
            border: none;
            cursor: pointer;
            padding: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #006B54;
            border-radius: 15px;
            transition: background 0.2s;
        }
        .back-button:hover {
            background: #f0f9f6;
        }
        .back-button svg {
            width: 24px;
            height: 24px;
            stroke-width: 2;
        }
        .transaksi-header-right {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .view-toggle {
            display: flex;
            gap: 5px;
        }
        .view-toggle button {
            width: 40px;
            height: 40px;
            border-radius: 15px;
            border: 1px solid #006B54;
            background: white;
            color: #006B54;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0;
            min-height: auto;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.2s;
        }
        .view-toggle button.active {
            background: #006B54;
            color: white;
        }
        .view-toggle button svg {
            width: 20px;
            height: 20px;
            stroke: currentColor;
            stroke-width: 2;
            fill: none;
        }
        /* ==================== HALAMAN CART ==================== */
        #cart-page {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            display: none;
        }
        .cart-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
        }
        .cart-header h2 {
            color: #006B54;
            font-size: 1.5rem;
            margin: 0;
        }
        .cart-content {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .cart-items-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        .cart-items-table th {
            text-align: left;
            padding: 12px;
            background: #f5f5f5;
            color: #333;
        }
        .cart-items-table td {
            padding: 12px;
            border-bottom: 1px solid #eee;
        }
        .cart-total {
            text-align: right;
            font-size: 1.3rem;
            margin-bottom: 20px;
            font-weight: 600;
        }
        @media (max-width: 768px) {
            .cart-items-table th,
            .cart-items-table td {
                font-size: 0.8rem;
                padding: 6px;
            }
            .cart-total {
                font-size: 1.1rem;
            }
        }
        .cart-actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }
        /* ==================== HALAMAN PEMBAYARAN (MODIFIKASI) ==================== */
        #payment-page {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            display: none;
        }
        .payment-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
        }
        .payment-header h2 {
            color: #006B54;
            font-size: 1.5rem;
            margin: 0;
        }
        .payment-content {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .payment-summary {
            margin-bottom: 20px;
            padding: 15px;
            background: #f9f9f9;
            border-radius: 15px;
        }
        .payment-summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }
        .payment-summary-row.total {
            font-weight: 600;
            font-size: 1.3rem;
            border-top: 1px solid #ddd;
            padding-top: 10px;
        }
        .payment-methods-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        .payment-method-item {
            background: #f9f9f9;
            border-radius: 15px;
            padding: 15px;
            text-align: center;
        }
        .payment-method-item label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #006B54;
        }
        .payment-method-item input {
            width: 100%;
            padding: 10px;
            border: 1px solid #006B54;
            border-radius: 15px;
            font-size: 1rem;
            text-align: right;
        }
        #shortage-display {
            display: none;
            margin-bottom: 15px;
            padding: 10px;
            background: #fff3f3;
            border-radius: 10px;
            border: 1px solid #ff6b6b;
            color: #ff0000;
            font-weight: 600;
        }
        .change-amount {
            margin-bottom: 20px;
            font-size: 1.2rem;
            font-weight: 600;
            color: #006B54;
        }
        .payment-actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }
        .printer-section {
            margin-top: 20px;
            border-top: 1px solid #ddd;
            padding-top: 15px;
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            gap: 15px;
        }
        .printer-status-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .status-light {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background-color: #ff4444;
            transition: background-color 0.3s;
        }
        .status-light.connected {
            background-color: #00C851;
        }
        #connect-printer-btn {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            background: #006B54;
            color: white;
            border: 1px solid #006B54;
        }
        #connect-printer-btn svg {
            width: 18px;
            height: 18px;
            stroke: currentColor;
            stroke-width: 2;
            fill: none;
        }
        #print-receipt-btn {
            background: #006B54;
            color: white;
            border: 1px solid #006B54;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }
        #print-receipt-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        /* ==================== MODAL OVERLAY ==================== */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 15px;
        }
        .modal-content {
            background: #FFFFFF;
            border-radius: 15px;
            width: 100%;
            max-width: 450px;
            max-height: 90vh;
            overflow: hidden;
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
            animation: modalSlideIn 0.2s ease;
        }
        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .modal-header {
            padding: 12px 20px;
            color: #006B54;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            border-bottom: 1px solid rgba(0, 107, 84, 0.1);
            position: relative;
            background: #FFFFFF;
        }
        .modal-title {
            font-size: 1rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            color: #006B54;
        }
        .modal-body {
            padding: 20px;
            max-height: calc(90vh - 60px);
            overflow-y: auto;
            background: #FFFFFF;
        }
        .modal-footer {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
            padding: 15px 20px;
            border-top: 1px solid #eee;
            background: #fafafa;
            border-radius: 0 0 15px 15px;
        }
        input, textarea, select {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid #333333 !important;
            border-radius: 15px !important;
            font-size: 1rem;
            background: #FFFFFF !important;
            color: #333333 !important;
            transition: all 0.2s;
        }
        input:focus, textarea:focus, select:focus {
            border-color: #006B54 !important;
            outline: none !important;
            box-shadow: 0 0 0 3px rgba(0, 107, 84, 0.1) !important;
        }
        input::placeholder, textarea::placeholder {
            color: #999999 !important;
        }
        input[type="checkbox"] {
            width: 18px;
            height: 18px;
            accent-color: #006B54; /* Warna hijau sesuai tema */
            margin-right: 5px;
        }
        button {
            border-radius: 15px;
            padding: 12px 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            border: 1px solid transparent;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-size: 1rem;
            min-height: 48px;
        }
        .form-group {
            margin-bottom: 15px;
        }
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: #333;
        }
        .form-input {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #333;
            border-radius: 15px;
            font-size: 1rem;
            background: white;
            color: #333;
            transition: all 0.2s;
        }
        .form-input:focus {
            border-color: #006B54;
            outline: none;
            box-shadow: 0 0 0 3px rgba(0,107,84,0.1);
        }
        .form-button-primary {
            background: #006B54;
            color: white;
            border: 1px solid #006B54;
        }
        .form-button-primary:hover {
            background: #005a46;
        }
        .form-button-secondary {
            background: #d9d9d9;
            color: #333333;
            border: 1px solid #d9d9d9;
        }
        .form-button-secondary:hover {
            background: #cccccc;
        }
        .action-btn {
            width: 48px;
            height: 48px;
            border-radius: 15px;
            border: 1px solid #006B54;
            background: white;
            color: #006B54;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0;
            min-height: auto;
            position: relative;
        }
        .action-btn svg {
            width: 24px;
            height: 24px;
            stroke-width: 2;
        }
        .customer-badge {
            position: absolute;
            bottom: -2px;
            right: -2px;
            background: #006B54;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid white;
            font-weight: bold;
            text-transform: uppercase;
        }
        .cart-badge {
            position: absolute;
            top: -2px;
            right: -2px;
            background: #006B54;
            color: white;
            border-radius: 50%;
            min-width: 20px;
            height: 20px;
            font-size: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid white;
            font-weight: bold;
            padding: 0 4px;
        }
        .action-btn.delete-btn {
            border-color: #ff6b6b;
            color: #ff6b6b;
        }
        .action-btn.delete-btn:hover {
            background: #ff6b6b;
            color: white;
        }
        .action-btn.edit-btn:hover {
            background: #006B54;
            color: white;
        }
        .icon {
            width: 20px;
            height: 20px;
            stroke: currentColor;
            stroke-width: 1.5;
            stroke-linecap: round;
            stroke-linejoin: round;
            fill: none;
        }
        .icon-sm {
            width: 16px;
            height: 16px;
        }
        .icon-primary {
            color: #006B54;
        }
        .icon-white {
            color: white;
        }
        .icon-danger {
            color: #ff6b6b;
        }
        .error-state {
            text-align: center;
            padding: 40px 20px;
            color: #666;
            display: none;
        }
        .error-state .icon {
            width: 60px;
            height: 60px;
            margin-bottom: 20px;
            color: #ff6b6b;
        }
        .retry-button {
            margin-top: 20px;
            padding: 12px 24px;
            background: #006B54;
            color: white;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        .audio-notification {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
        /* ==================== MODAL KONFIRMASI PIUTANG ==================== */
        #confirm-piutang-modal {
            display: none;
        }
        /* ==================== MODAL PILIH CUSTOMER ==================== */
        #select-customer-modal {
            display: none;
        }
        /* ==================== MODAL INPUT KODE PENDING ==================== */
        #pending-code-modal {
            display: none;
        }
        /* ==================== SETTINGS MODAL ==================== */
        #settings-modal {
            display: none;
        }
        /* ==================== MODAL INVENTORY ==================== */
        #inventory-modal {
            display: none;
        }
        /* ==================== MODAL PENDING TRANSACTIONS ==================== */
        #pending-transactions-modal {
            display: none;
        }
        /* ==================== MODAL CREATE ADMIN ==================== */
        #create-admin-modal {
            display: none;
        }
        /* ==================== MODAL USER ==================== */
        #user-modal {
            display: none;
        }
        /* ==================== MODAL BUNDLE (BARU) ==================== */
        #bundle-modal {
            display: none;
        }
        /* ==================== TOMBOL FLOATING UNTUK PENDING ==================== */
        .floating-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: #006B54;
            color: white;
            border: none;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 200;
            transition: transform 0.2s;
        }
        .floating-btn:hover {
            transform: scale(1.1);
        }
        .floating-btn svg {
            width: 30px;
            height: 30px;
        }
        .pending-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #dc3545;
            color: white;
            border-radius: 50%;
            min-width: 20px;
            height: 20px;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid white;
            font-weight: bold;
            padding: 0 4px;
        }
        .piutang-btn {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            border: none;
            background: #ccc;
            color: white;
            font-weight: bold;
            font-size: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background 0.2s;
        }
        .piutang-btn.active {
            background: #dc3545;
        }
        .piutang-btn:hover {
            opacity: 0.8;
        }
        #notification {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            padding: 12px 20px;
            border-radius: 15px;
            display: none;
            color: white;
            background-color: #006B54;
            max-width: 90%;
            text-align: center;
            z-index: 1001;
            font-size: 14px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        /* Password wrapper untuk ikon show/hide */
        .password-wrapper {
            position: relative;
            display: flex;
            align-items: center;
        }
        .password-wrapper .form-input {
            padding-right: 40px; /* ruang untuk ikon */
        }
        .password-toggle {
            position: absolute;
            right: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            transition: color 0.2s;
        }
        .password-toggle:hover {
            color: #006B54;
        }
        .password-toggle .eye-icon {
            stroke: currentColor;
            fill: none;
            stroke-width: 2;
        }
        /* ==================== PERBAIKAN TAMPILAN INPUT QTY ==================== */
        .qty-control {
            display: flex;
            align-items: center;
            gap: 4px;
        }
        
        .qty-control button {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            border: 1px solid #006B54;
            background: white;
            color: #006B54;
            font-weight: bold;
            font-size: 1.2rem;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0;
            cursor: pointer;
            transition: all 0.2s;
            min-height: auto;
        }
        
        .qty-control button:hover {
            background: #006B54;
            color: white;
        }
        
        .qty-control .qty-input {
            width: 60px;
            text-align: center;
            padding: 6px 4px;
            font-size: 1rem;
            border: 1px solid #333;
            border-radius: 8px;
            margin: 0 2px;
        }
        
        /* Perbaikan tampilan item produk */
        .product-list-item {
            padding: 10px;
            border-bottom: 1px solid #eee;
            cursor: pointer;
        }
        
        .product-list-item:hover {
            background: #f9f9f9;
        }
        
        .product-list-item .name {
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        /* Responsif untuk layar kecil (HP) */
        @media (max-width: 480px) {
            .qty-control .qty-input {
                width: 45px;
                font-size: 0.9rem;
            }
            
            .qty-control button {
                width: 28px;
                height: 28px;
                font-size: 1rem;
            }
            
            .product-list-item > div:first-of-type {
                flex-wrap: wrap;
            }
            
            .product-list-item .price {
                font-size: 0.85rem;
            }
            
            .product-grid .product-card {
                padding: 10px;
            }
            
            .product-grid .qty-control .qty-input {
                width: 40px;
            }
        }
        /* ==================== TAMPILAN GRID PRODUK ==================== */
        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 12px;
            padding: 10px;
        }
        
        .product-card {
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 15px;
            padding: 15px 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            flex-direction: column;
            gap: 6px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        
        .product-card:hover {
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            transform: translateY(-2px);
        }
        
        .product-card .product-image {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 5px;
        }
        
        .product-card .name {
            font-weight: 600;
            color: #333;
            font-size: 0.95rem;
            line-height: 1.3;
            min-height: 2.6em;
            overflow: hidden;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
        }
        
        .product-card .price {
            font-weight: 600;
            color: #006B54;
            font-size: 1rem;
        }
        
        .product-card .stock {
            font-size: 0.8rem;
            color: #666;
        }
        
        .product-card .qty-control {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 4px;
            margin-top: 5px;
        }
        
        .product-card .qty-control button {
            width: 30px;
            height: 30px;
            border-radius: 8px;
            border: 1px solid #006B54;
            background: white;
            color: #006B54;
            font-weight: bold;
            font-size: 1.1rem;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0;
            cursor: pointer;
            transition: all 0.2s;
            min-height: auto;
        }
        
        .product-card .qty-control button:hover {
            background: #006B54;
            color: white;
        }
        
        .product-card .qty-control .qty-input {
            width: 50px;
            text-align: center;
            padding: 4px;
            font-size: 0.9rem;
            border: 1px solid #333;
            border-radius: 8px;
        }
        
        /* ==================== TAMPILAN LIST PRODUK (sudah ada, dipastikan rapi) ==================== */
        .product-list {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }
        
        .product-list-item {
            padding: 10px 12px;
            border-bottom: 1px solid #eee;
            cursor: pointer;
            display: flex;
            flex-direction: column;
        }
        
        .product-list-item:hover {
            background: #f9f9f9;
        }
        
        .product-list-item .name {
            font-weight: 600;
            margin-bottom: 4px;
        }
        
        .product-list-item .price {
            color: #006B54;
            font-weight: 500;
        }
        
        .product-list-item .qty-control {
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .product-list-item .qty-control button {
            width: 30px;
            height: 30px;
            border-radius: 8px;
            border: 1px solid #006B54;
            background: white;
            color: #006B54;
            font-weight: bold;
            font-size: 1.1rem;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0;
            cursor: pointer;
            transition: all 0.2s;
            min-height: auto;
        }
        
        .product-list-item .qty-control button:hover {
            background: #006B54;
            color: white;
        }
        
        .product-list-item .qty-control .qty-input {
            width: 60px;
            text-align: center;
            padding: 4px;
            font-size: 0.9rem;
            border: 1px solid #333;
            border-radius: 8px;
        }
        
        /* ==================== RESPONSIF UNTUK LAYAR KECIL ==================== */
        @media (max-width: 480px) {
            .product-grid {
                grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
                gap: 8px;
            }
            
            .product-card {
                padding: 10px 5px;
            }
            
            .product-card .name {
                font-size: 0.85rem;
            }
            
            .product-card .price {
                font-size: 0.9rem;
            }
            
            .product-card .qty-control .qty-input {
                width: 40px;
            }
        }
    </style>
</head>
<body>
    <!-- ==================== LOGIN OVERLAY ==================== -->
    <div id="login-overlay">
        <div class="login-container">
            <h2>POSPLUS</h2>
            <input type="text" id="login-username" placeholder="Username" autocomplete="off">
            <input type="password" id="login-password" placeholder="Password">
            <button id="login-btn">Masuk</button>
            <button id="import-login-btn">Import Data</button>
            <div id="login-error" class="error-message">Username atau password salah</div>
            <div class="hint">Hubungi administrator</div>
        </div>
    </div>

    <!-- ==================== HEADER ==================== -->
    <header class="app-header">
        <div class="header-content">
            <div class="app-title">
                <button class="drawer-toggle" id="drawer-toggle" onclick="toggleDrawer()">
                    <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none">
                        <line x1="3" y1="12" x2="21" y2="12"></line>
                        <line x1="3" y1="6" x2="21" y2="6"></line>
                        <line x1="3" y1="18" x2="21" y2="18"></line>
                    </svg>
                </button>
                <div class="icon-container">
                    <svg class="icon box-icon icon-primary" viewBox="0 0 24 24">
                        <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/>
                        <polyline points="3.27 6.96 12 12.01 20.73 6.96"/>
                        <line x1="12" y1="22.08" x2="12" y2="12"/>
                    </svg>
                </div>
                <span>POSPLUS</span>
            </div>
            <div class="header-actions">
                <span id="user-name-display"></span>
                <button onclick="showSettingsModal()">
                    <svg class="icon settings-icon icon-primary" viewBox="0 0 24 24">
                        <circle cx="12" cy="12" r="3"/>
                        <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
                    </svg>
                </button>
                <button onclick="logout()">
                    <svg class="icon" viewBox="0 0 24 24">
                        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
                        <polyline points="16 17 21 12 16 7"/>
                        <line x1="21" y1="12" x2="9" y2="12"/>
                    </svg>
                </button>
            </div>
        </div>
    </header>

    <!-- ==================== DRAWER SIDEBAR ==================== -->
    <div class="sidebar" id="sidebar">
        <div class="menu-group">
            <button class="home-button" onclick="goHome()">
                <svg class="icon" viewBox="0 0 24 24" width="20" height="20">
                    <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V9z"/>
                    <polyline points="9 22 9 12 15 12 15 22"/>
                </svg>
                <span>Beranda</span>
            </button>
        </div>
        <!-- Grup MASTER DATA KASIR -->
        <div class="menu-group" id="menu-master">
            <div class="menu-header" onclick="toggleSubMenu(this)">
                <span class="menu-title">MASTER DATA</span>
                <span class="arrow">></span>
            </div>
            <div class="sub-menu">
                <button onclick="window.location.href='master-data.html?action=addItem'">
                    <svg class="icon" viewBox="0 0 24 24">
                        <circle cx="12" cy="12" r="10"/>
                        <line x1="12" y1="8" x2="12" y2="16"/>
                        <line x1="8" y1="12" x2="16" y2="12"/>
                    </svg>
                    <span>Tambah Item</span>
                </button>
                <button onclick="window.location.href='master-data.html?action=listItems'">
                    <svg class="icon" viewBox="0 0 24 24">
                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                        <line x1="9" y1="9" x2="15" y2="15"/>
                        <line x1="15" y1="9" x2="9" y2="15"/>
                    </svg>
                    <span>Daftar Item</span>
                </button>
                <button onclick="window.location.href='master-data.html?action=addCategory'">
                    <svg class="icon" viewBox="0 0 24 24">
                        <circle cx="12" cy="12" r="10"/>
                        <line x1="12" y1="8" x2="12" y2="16"/>
                        <line x1="8" y1="12" x2="16" y2="12"/>
                    </svg>
                    <span>Tambah Kategori</span>
                </button>
                <button onclick="window.location.href='master-data.html?action=listCategories'">
                    <svg class="icon" viewBox="0 0 24 24">
                        <path d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20"/>
                        <path d="M10 2v20"/>
                    </svg>
                    <span>Daftar Kategori</span>
                </button>
                <button onclick="window.location.href='master-data.html?action=addUnit'">
                    <svg class="icon" viewBox="0 0 24 24">
                        <circle cx="12" cy="12" r="10"/>
                        <line x1="12" y1="8" x2="12" y2="16"/>
                        <line x1="8" y1="12" x2="16" y2="12"/>
                    </svg>
                    <span>Tambah Satuan</span>
                </button>
                <button onclick="window.location.href='master-data.html?action=listUnits'">
                    <svg class="icon" viewBox="0 0 24 24">
                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                        <line x1="3" y1="9" x2="21" y2="9"/>
                        <line x1="9" y1="21" x2="9" y2="9"/>
                    </svg>
                    <span>Daftar Satuan</span>
                </button>
            </div>
        </div>

        <!-- Grup TRANSAKSI -->
        <div class="menu-group" id="menu-transaksi">
            <div class="menu-header" onclick="toggleSubMenu(this)">
                <span class="menu-title">TRANSAKSI</span>
                <span class="arrow">></span>
            </div>
            <div class="sub-menu">
                <button onclick="openTransaksiPage(); closeSubMenu(this);">
                    <svg class="icon" viewBox="0 0 24 24">
                        <rect x="2" y="5" width="20" height="14" rx="2" ry="2"/>
                        <line x1="2" y1="10" x2="22" y2="10"/>
                        <line x1="7" y1="15" x2="12" y2="15"/>
                    </svg>
                    <span>Transaksi Kasir</span>
                </button>
            </div>
        </div>
        <!-- Grup PEMBELIAN -->
        <div class="menu-group" id="menu-pembelian">
            <div class="menu-header" onclick="toggleSubMenu(this)">
                <span class="menu-title">PEMBELIAN</span>
                <span class="arrow">></span>
            </div>
            <div class="sub-menu">
                <button onclick="openPembelianPage(); closeSubMenu(this);">
                    <svg class="icon" viewBox="0 0 24 24">
                        <path d="M5 3h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"/>
                        <path d="M8 7h8M8 11h6M8 15h4"/>
                    </svg>
                    <span>Pembelian Barang</span>
                </button>
            </div>
        </div>
        <!-- Grup INVENTORY -->
        <div class="menu-group" id="menu-inventory">
            <div class="menu-header" onclick="toggleSubMenu(this)">
                <span class="menu-title">INVENTORY</span>
                <span class="arrow">></span>
            </div>
            <div class="sub-menu">
                <button onclick="openInventoryStokModal(); closeSubMenu(this);">
                    <svg class="icon" viewBox="0 0 24 24">
                        <rect x="2" y="7" width="20" height="14" rx="2" ry="2"/>
                        <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"/>
                        <line x1="12" y1="11" x2="12" y2="17"/>
                    </svg>
                    <span>Stok Barang</span>
                </button>
                <button onclick="openInventoryOpnameModal(); closeSubMenu(this);">
                    <svg class="icon" viewBox="0 0 24 24">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                        <polyline points="14 2 14 8 20 8"/>
                        <line x1="12" y1="18" x2="12" y2="12"/>
                        <line x1="9" y1="15" x2="15" y2="15"/>
                    </svg>
                    <span>Stok Opname</span>
                </button>
                <button onclick="openInventoryLaporanModal(); closeSubMenu(this);">
                    <svg class="icon" viewBox="0 0 24 24">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                        <polyline points="7 10 12 15 17 10"/>
                        <line x1="12" y1="15" x2="12" y2="3"/>
                    </svg>
                    <span>Laporan Stok</span>
                </button>
            </div>
        </div>

        <!-- Grup PELANGGAN & PEMASOK (diarahkan ke relasi.html) -->
        <div class="menu-group" id="menu-cust">
            <div class="menu-header" onclick="toggleSubMenu(this)">
                <span class="menu-title">CUST & SUPL</span>
                <span class="arrow">></span>
            </div>
            <div class="sub-menu">
                <button onclick="window.location.href='relasi.html#customer-add'; closeSubMenu(this);">
                    <svg class="icon" viewBox="0 0 24 24">
                        <circle cx="12" cy="8" r="4"/>
                        <path d="M5 20v-2a7 7 0 0 1 14 0v2"/>
                    </svg>
                    <span>Tambah Pelanggan</span>
                </button>
                <button onclick="window.location.href='relasi.html#customers'; closeSubMenu(this);">
                    <svg class="icon" viewBox="0 0 24 24">
                        <circle cx="12" cy="8" r="4"/>
                        <path d="M5 20v-2a7 7 0 0 1 14 0v2"/>
                        <rect x="2" y="2" width="20" height="20" rx="2" ry="2" stroke="currentColor" fill="none"/>
                    </svg>
                    <span>Daftar Pelanggan</span>
                </button>
                <button onclick="window.location.href='relasi.html#supplier-add'; closeSubMenu(this);">
                    <svg class="icon" viewBox="0 0 24 24">
                        <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/>
                        <circle cx="12" cy="12" r="2"/>
                    </svg>
                    <span>Tambah Supplier</span>
                </button>
                <button onclick="window.location.href='relasi.html#suppliers'; closeSubMenu(this);">
                    <svg class="icon" viewBox="0 0 24 24">
                        <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/>
                        <circle cx="12" cy="12" r="2"/>
                        <rect x="2" y="2" width="20" height="20" rx="2" ry="2" stroke="currentColor" fill="none"/>
                    </svg>
                    <span>Daftar Supplier</span>
                </button>
            </div>
        </div>

        <!-- Grup LAPORAN -->
        <div class="menu-group" id="menu-laporan">
            <div class="menu-header" onclick="toggleSubMenu(this)">
                <span class="menu-title">LAPORAN</span>
                <span class="arrow">></span>
            </div>
            <div class="sub-menu">
                <button onclick="openLaporanPage(); closeSubMenu(this);">
                    <svg class="icon" viewBox="0 0 24 24">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                        <polyline points="7 10 12 15 17 10"/>
                        <line x1="12" y1="15" x2="12" y2="3"/>
                    </svg>
                    <span>Laporan Penjualan</span>
                </button>
            </div>
        </div>
        <!-- Grup SISTEM -->
        <div class="menu-group" id="menu-sistem">
            <div class="menu-header" onclick="toggleSubMenu(this)">
                <span class="menu-title">SISTEM</span>
                <span class="arrow">></span>
            </div>
            <div class="sub-menu">
                <button onclick="exportData(); closeSubMenu(this);">
                    <svg class="icon" viewBox="0 0 24 24">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                        <polyline points="17 8 12 3 7 8"/>
                        <line x1="12" y1="3" x2="12" y2="15"/>
                    </svg>
                    <span>Export Data</span>
                </button>
                <button onclick="importData(); closeSubMenu(this);">
                    <svg class="icon" viewBox="0 0 24 24">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                        <polyline points="7 10 12 15 17 10"/>
                        <line x1="12" y1="15" x2="12" y2="3"/>
                    </svg>
                    <span>Import Data</span>
                </button>
            </div>
        </div>
        
    </div>
    <div class="drawer-overlay" id="drawer-overlay" onclick="closeDrawer()"></div>

    <!-- ==================== AUDIO ELEMENTS ==================== -->
    <audio id="notification-success" class="audio-notification" preload="auto">
        <source src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEAQB8AAEAfAAABAAgAZGF0YQAAAAA=" type="audio/wav">
    </audio>
    <audio id="notification-warning" class="audio-notification" preload="auto">
        <source src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEAQB8AAEAfAAABAAgAZGF0YQAAAAA=" type="audio/wav">
    </audio>
    <audio id="notification-error" class="audio-notification" preload="auto">
        <source src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEAQB8AAEAfAAABAAgAZGF0YQAAAAA=" type="audio/wav">
    </audio>
    <audio id="button-click-sound" class="audio-notification" preload="auto">
        <source src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEAQB8AAEAfAAABAAgAZGF0YQAAAAA=" type="audio/wav">
    </audio>

    <!-- ==================== ERROR STATE ==================== -->
    <div id="error-state" class="error-state">
        <svg class="icon" viewBox="0 0 24 24">
            <circle cx="12" cy="12" r="10"/>
            <line x1="12" y1="8" x2="12" y2="12"/>
            <line x1="12" y1="16" x2="12.01" y2="16"/>
        </svg>
        <h3>Gagal memuat aplikasi</h3>
        <p id="error-message"></p>
        <button class="retry-button" onclick="retryAppLoad()">
            <svg class="icon icon-sm" viewBox="0 0 24 24">
                <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/>
                <path d="M3 3v5h5"/>
            </svg>
            Coba Lagi
        </button>
    </div>

    <!-- ==================== MAIN CONTENT (BERANDA) ==================== -->
    <main class="main-content">
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon"></div>
                <div class="stat-info">
                    <span class="stat-label">Penjualan Hari Ini</span>
                    <span class="stat-value" id="today-sales">Rp 0</span>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon"></div>
                <div class="stat-info">
                    <span class="stat-label">Jumlah Transaksi</span>
                    <span class="stat-value" id="today-transactions">0</span>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon"></div>
                <div class="stat-info">
                    <span class="stat-label">Stok Menipis</span>
                    <span class="stat-value" id="low-stock-count">0</span>
                </div>
            </div>
        </div>
        <div id="notifications-area" style="margin-top: 20px; display: flex; flex-direction: column; gap: 10px;"></div>
        <div style="margin-top: 30px; background: white; border-radius: 15px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
            <h3 style="color: #006B54; margin-bottom: 15px;">Grafik Penjualan Per Jam (Hari Ini)</h3>
            <canvas id="salesChart" width="400" height="200"></canvas>
        </div>
        <div style="margin-top: 30px; background: white; border-radius: 15px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
            <h3 style="color: #006B54; margin-bottom: 15px;">Transaksi Pending</h3>
            <div id="pending-list-container" style="max-height: 300px; overflow-y: auto;"></div>
        </div>
    </main>

    <!-- ==================== HALAMAN TRANSAKSI (PRODUK) ==================== -->
    <div id="transaksi-page">
        <div class="transaksi-header">
            <div class="transaksi-header-left">
                <button class="back-button" onclick="closeTransaksiPage()" title="Kembali ke Beranda">
                    <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none">
                        <line x1="19" y1="12" x2="5" y2="12"></line>
                        <polyline points="12 19 5 12 12 5"></polyline>
                    </svg>
                </button>
                <h2>Transaksi Kasir</h2>
            </div>
            <div class="transaksi-header-right">
                <div class="view-toggle">
                    <button id="view-list-btn" onclick="setProductViewMode('list')" title="Tampilan List">
                        <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="2" fill="none">
                            <line x1="8" y1="6" x2="21" y2="6"></line>
                            <line x1="8" y1="12" x2="21" y2="12"></line>
                            <line x1="8" y1="18" x2="21" y2="18"></line>
                            <line x1="3" y1="6" x2="3.01" y2="6"></line>
                            <line x1="3" y1="12" x2="3.01" y2="12"></line>
                            <line x1="3" y1="18" x2="3.01" y2="18"></line>
                        </svg>
                    </button>
                    <button id="view-grid-btn" onclick="setProductViewMode('grid')" title="Tampilan Grid">
                        <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="2" fill="none">
                            <rect x="3" y="3" width="7" height="7"></rect>
                            <rect x="14" y="3" width="7" height="7"></rect>
                            <rect x="3" y="14" width="7" height="7"></rect>
                            <rect x="14" y="14" width="7" height="7"></rect>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
        <div style="display: flex; align-items: center; margin-bottom: 15px; gap: 10px; flex-wrap: wrap;">
            <input type="text" id="barcode-input" class="form-input" placeholder="Cari produk atau scan barcode..." oninput="filterProductList(this.value)" onkeypress="if(event.key==='Enter') processBarcode()" style="flex: 2; min-width: 200px;">
            <button id="customer-select-btn" class="action-btn" onclick="openSelectCustomerModal()" title="Pilih Pelanggan">
                <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="8" r="4"/>
                    <path d="M5 20v-2a7 7 0 0 1 14 0v2"/>
                </svg>
                <span id="customer-badge" class="customer-badge" style="display: none;"></span>
            </button>
            <button id="bundle-btn" class="action-btn" onclick="openBundleModal()" title="Pilih Bundle">
                <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                    <line x1="3" y1="9" x2="21" y2="9"/>
                    <line x1="9" y1="21" x2="9" y2="9"/>
                </svg>
                <span id="bundle-badge" class="cart-badge" style="display: none;">0</span>
            </button>
            <button id="cart-icon-btn" class="action-btn" onclick="openCartPage()" title="Lihat Keranjang">
                <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="9" cy="21" r="1"/>
                    <circle cx="20" cy="21" r="1"/>
                    <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/>
                </svg>
                <span id="cart-count" class="cart-badge">0</span>
            </button>
        </div>
        <div id="product-container" style="max-height: 500px; overflow-y: auto; margin-bottom: 15px; border: 1px solid #ddd; border-radius: 15px; padding: 10px;"></div>
    </div>

    <!-- ==================== HALAMAN CART ==================== -->
    <div id="cart-page">
        <div class="cart-header">
            <button class="back-button" onclick="closeCartPage()" title="Kembali ke Transaksi">
                <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none">
                    <line x1="19" y1="12" x2="5" y2="12"></line>
                    <polyline points="12 19 5 12 12 5"></polyline>
                </svg>
            </button>
            <h2>Keranjang Belanja</h2>
        </div>
        <div class="cart-content">
            <table class="cart-items-table">
                <thead>
                    <tr>
                        <th>Produk</th>
                        <th>Jumlah</th>
                        <th>Harga Satuan</th>
                        <th>Subtotal</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody id="cart-items-page"></tbody>
            </table>
            <div class="cart-total">
                Total: <span id="cart-total-page">Rp 0</span>
            </div>
            <div class="cart-actions">
                <button id="piutang-btn-cart" class="piutang-btn" onclick="addOutstandingToCart()">!</button>
                <button class="form-button-secondary" onclick="saveDraftTransaction()">Simpan Draft</button>
                <button class="form-button-primary" onclick="openPaymentPage()">Bayar</button>
            </div>
        </div>
    </div>

    <!-- ==================== HALAMAN PEMBAYARAN ==================== -->
    <div id="payment-page">
        <div class="payment-header">
            <button class="back-button" onclick="closePaymentPage()" title="Kembali ke Keranjang">
                <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none">
                    <line x1="19" y1="12" x2="5" y2="12"></line>
                    <polyline points="12 19 5 12 12 5"></polyline>
                </svg>
            </button>
            <h2>Pembayaran</h2>
        </div>
        <div class="payment-content">
            <div class="payment-summary">
                <div class="payment-summary-row">
                    <span>Total Belanja</span>
                    <span id="payment-total">Rp 0</span>
                </div>
                <div class="payment-summary-row total">
                    <span>Total Dibayar</span>
                    <span id="payment-grand-total">Rp 0</span>
                </div>
            </div>
            <div class="payment-methods-grid">
                <div class="payment-method-item">
                    <label>Tunai</label>
                    <input type="number" id="payment-cash" class="payment-input" min="0" step="0.01" value="0" oninput="updatePaymentSummary()">
                </div>
                <div class="payment-method-item">
                    <label>Kartu Debit/Kredit</label>
                    <input type="number" id="payment-card" class="payment-input" min="0" step="0.01" value="0" oninput="updatePaymentSummary()">
                </div>
                <div class="payment-method-item">
                    <label>Transfer Bank</label>
                    <input type="number" id="payment-transfer" class="payment-input" min="0" step="0.01" value="0" oninput="updatePaymentSummary()">
                </div>
                <div class="payment-method-item">
                    <label>E-Wallet</label>
                    <input type="number" id="payment-ewallet" class="payment-input" min="0" step="0.01" value="0" oninput="updatePaymentSummary()">
                </div>
            </div>
            <div id="shortage-display" style="display:none; color:red; margin-bottom:10px; padding:10px; background:#fff3f3; border-radius:10px;">
                Kurang bayar: Rp <span id="shortage-amount">0</span>
            </div>
            <div class="change-amount" id="change-amount">Kembalian: Rp 0</div>
            <div class="payment-actions">
                <button class="form-button-secondary" onclick="closePaymentPage()">Batal</button>
                <button class="form-button-primary" onclick="processPayment()">Proses Pembayaran</button>
            </div>
            <div class="printer-section">
                <button id="connect-printer-btn" class="form-button-secondary" onclick="togglePrinter()">
                    <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none">
                        <path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"/>
                        <path d="M6 9V3h12v6"/>
                        <rect x="6" y="15" width="12" height="6" rx="2"/>
                    </svg>
                    <span id="connect-btn-text">Connect</span>
                </button>
                <div class="printer-status-indicator">
                    <span class="status-light" id="printer-status-light"></span>
                    <span id="printer-status-text"></span>
                </div>
                <button id="print-receipt-btn" class="form-button-primary" onclick="printReceipt()" disabled style="margin-left: auto;">
                    <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none">
                        <path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"/>
                        <path d="M6 9V3h12v6"/>
                        <rect x="6" y="15" width="12" height="6" rx="2"/>
                    </svg>
                    Print Struk
                </button>
            </div>
        </div>
    </div>

    <!-- ==================== MODAL KONFIRMASI PIUTANG ==================== -->
    <div class="modal-overlay" id="confirm-piutang-modal">
        <div class="modal-content" style="max-width:400px;">
            <div class="modal-header">
                <h2 class="modal-title">Konfirmasi Piutang</h2>
            </div>
            <div class="modal-body">
                <p>Jumlah bayar kurang sebesar <span id="shortage-confirm">Rp 0</span>.</p>
                <p>Apakah ingin melanjutkan transaksi dengan mencatat sisa sebagai piutang?</p>
                <p style="font-size:0.9rem; color:#666;">Pastikan pelanggan telah dipilih.</p>
                <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px; margin-top:20px;">
                    <button class="form-button-secondary" onclick="closeConfirmPiutangModal()">Batal</button>
                    <button class="form-button-primary" onclick="processPaymentWithPiutang()">Ya, Lanjutkan</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ==================== MODAL PILIH CUSTOMER ==================== -->
    <div class="modal-overlay" id="select-customer-modal">
        <div class="modal-content" style="max-width:500px;">
            <div class="modal-header">
                <h2 class="modal-title">
                    <svg class="icon icon-primary" viewBox="0 0 24 24">
                        <circle cx="12" cy="8" r="4"/>
                        <path d="M5 20v-2a7 7 0 0 1 14 0v2"/>
                    </svg>
                    Pilih Pelanggan
                </h2>
            </div>
            <div class="modal-body">
                <div id="select-customer-list" style="max-height:400px; overflow-y:auto;"></div>
                <div style="margin-top:20px;">
                    <button type="button" class="form-button-secondary" style="width:100%;" onclick="closeSelectCustomerModal()">Tutup</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ==================== MODAL INPUT KODE PENDING ==================== -->
    <div class="modal-overlay" id="pending-code-modal">
        <div class="modal-content" style="max-width:400px;">
            <div class="modal-header">
                <h2 class="modal-title">Simpan Draft Transaksi</h2>
            </div>
            <div class="modal-body">
                <div style="margin-bottom:15px;">
                    <label style="display:block; margin-bottom:8px; color:#333; font-weight:500;">Kode / Nama Pending</label>
                    <input type="text" id="pending-code-input" class="form-input" placeholder="Misal: PENDING-001" autocomplete="off">
                    <small style="color:#666;">Kosongkan untuk menggunakan nama default</small>
                </div>
                <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;">
                    <button type="button" class="form-button-secondary" onclick="closePendingCodeModal()">Batal</button>
                    <button type="button" class="form-button-primary" onclick="confirmSaveDraft()">Simpan</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ==================== SETTINGS MODAL ==================== -->
    <div class="modal-overlay" id="settings-modal">
        <div class="modal-content" style="max-width:500px;">
            <div class="modal-header">
                <h2 class="modal-title">
                    <svg class="icon icon-primary settings-icon" viewBox="0 0 24 24">
                        <circle cx="12" cy="12" r="3"/>
                        <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
                    </svg>
                    Pengaturan
                </h2>
            </div>
            <div class="modal-body">
                <div id="settings-content">
                    <!-- Konten settings diisi oleh JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <!-- ==================== MODAL INVENTORY ==================== -->
    <div class="modal-overlay" id="inventory-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="inventory-modal-title">
                    <svg class="icon icon-primary" viewBox="0 0 24 24">
                        <rect x="2" y="7" width="20" height="14" rx="2" ry="2"/>
                        <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"/>
                    </svg>
                    Inventory
                </h2>
            </div>
            <div class="modal-body" id="inventory-modal-body">
            </div>
        </div>
    </div>

    <!-- ==================== MODAL PENDING TRANSACTIONS ==================== -->
    <div class="modal-overlay" id="pending-transactions-modal">
        <div class="modal-content" style="max-width:600px;">
            <div class="modal-header">
                <h2 class="modal-title">
                    <svg class="icon icon-primary" viewBox="0 0 24 24">
                        <circle cx="12" cy="12" r="10"/>
                        <polyline points="12 6 12 12 16 14"/>
                    </svg>
                    Transaksi Pending
                </h2>
            </div>
            <div class="modal-body">
                <div id="pending-transactions-list" style="max-height:400px; overflow-y:auto;"></div>
                <div style="margin-top:20px; display:grid;grid-template-columns:1fr;gap:10px;">
                    <button type="button" class="form-button-secondary" onclick="closePendingTransactionsModal()">Tutup</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ==================== MODAL CREATE ADMIN (PERTAMA KALI) ==================== -->
    <div class="modal-overlay" id="create-admin-modal">
        <div class="modal-content" style="max-width:400px;">
            <div class="modal-header">
                <h2 class="modal-title">Buat Admin Pertama</h2>
            </div>
            <div class="modal-body">
                <div style="margin-bottom:15px;">
                    <label>Username</label>
                    <input type="text" id="admin-username" class="form-input">
                </div>
                <div style="margin-bottom:15px;">
                    <label>Password</label>
                    <input type="password" id="admin-password" class="form-input">
                </div>
                <div style="margin-bottom:15px;">
                    <label>Nama Lengkap</label>
                    <input type="text" id="admin-name" class="form-input">
                </div>
                <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;">
                    <button class="form-button-secondary" onclick="closeCreateAdminModal()">Batal</button>
                    <button class="form-button-primary" onclick="saveFirstAdmin()">Simpan</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ==================== MODAL USER MANAGEMENT (di settings) ==================== -->
    <div id="user-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="user-modal-title"></h2>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Username</label>
                    <input type="text" id="user-modal-username" class="form-input" placeholder="Username">
                </div>
    
                <!-- Field Password dengan ikon show/hide -->
                <div class="form-group">
                    <label>Password</label>
                    <div class="password-wrapper">
                        <input type="password" id="user-modal-password" class="form-input" placeholder="Kosongkan jika tidak diubah">
                        <span class="password-toggle" onclick="togglePasswordVisibility('user-modal-password', this)">
                            <svg class="icon eye-icon" viewBox="0 0 24 24" width="20" height="20">
                                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                <circle cx="12" cy="12" r="3"></circle>
                            </svg>
                        </span>
                    </div>
                </div>
    
                <!-- Field Konfirmasi Password dengan ikon show/hide -->
                <div class="form-group">
                    <label>Konfirmasi Password</label>
                    <div class="password-wrapper">
                        <input type="password" id="user-modal-confirm-password" class="form-input" placeholder="Ulangi password">
                        <span class="password-toggle" onclick="togglePasswordVisibility('user-modal-confirm-password', this)">
                            <svg class="icon eye-icon" viewBox="0 0 24 24" width="20" height="20">
                                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                <circle cx="12" cy="12" r="3"></circle>
                            </svg>
                        </span>
                    </div>
                </div>
    
                <div class="form-group">
                    <label>Nama Lengkap</label>
                    <input type="text" id="user-modal-name" class="form-input" placeholder="Nama">
                </div>
                <div class="form-group">
                    <label>Role</label>
                    <select id="user-modal-role" class="form-input">
                        <option value="">-- Pilih Role --</option>
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button class="form-button-secondary" onclick="closeUserModal()">Batal</button>
                <button class="form-button-primary" onclick="saveUser()">Simpan</button>
            </div>
        </div>
    </div>

    <!-- ==================== MODAL BUNDLE (BARU) ==================== -->
    <div class="modal-overlay" id="bundle-modal">
        <div class="modal-content" style="max-width:600px;">
            <div class="modal-header">
                <h2 class="modal-title">
                    <svg class="icon icon-primary" viewBox="0 0 24 24">
                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                        <line x1="3" y1="9" x2="21" y2="9"/>
                        <line x1="9" y1="21" x2="9" y2="9"/>
                    </svg>
                    Pilih Bundle
                </h2>
            </div>
            <div class="modal-body">
                <div id="bundle-list-container" style="max-height:400px; overflow-y:auto;"></div>
                <div style="margin-top:20px;">
                    <button class="form-button-secondary" onclick="closeBundleModal()">Tutup</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ==================== TOMBOL FLOATING UNTUK PENDING ==================== -->
    <button id="pending-transactions-btn" class="floating-btn" onclick="openPendingTransactionsModal()" title="Transaksi Pending">
        <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/>
            <polyline points="12 6 12 12 16 14"/>
        </svg>
        <span id="pending-badge" class="pending-badge" style="display: none;">0</span>
    </button>

    <!-- ==================== NOTIFICATION ==================== -->
    <div id="notification"></div>

    <script src="app.js"></script>
</body>
</html>
